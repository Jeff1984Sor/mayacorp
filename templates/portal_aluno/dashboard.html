{% extends 'portal_aluno/base_mobile.html' %}
{% load static %}

{% block content %}
<div class="animate-in fade-in slide-in-from-bottom-6 duration-1000 pb-10">

    <!-- 1. GREETING & STATUS (M√ÅXIMA NITIDEZ) -->
    <div class="mb-10 mt-4 px-2">
        <h2 class="text-4xl font-black text-slate-900 tracking-tighter leading-tight">
            Ol√°, <span class="text-primary">{{ aluno.nome|truncatewords:1|cut:"..." }}</span>! üßò‚Äç‚ôÄÔ∏è
        </h2>
        <p class="text-slate-500 font-bold mt-2 uppercase tracking-[2px] text-[11px]">Sua jornada de hoje come√ßa agora.</p>
    </div>

    <!-- 2. CARD PR√ìXIMA AULA (DESIGN DE EVENTO PREMIUM) -->
    <section class="relative bg-slate-900 rounded-[3rem] p-10 shadow-2xl shadow-primary/20 overflow-hidden mb-12 group border-b-8 border-primary">
        <!-- Detalhe decorativo Marsala -->
        <div class="absolute top-0 right-0 w-40 h-40 bg-primary/20 rounded-full -mr-20 -mt-20 blur-3xl transition-all group-hover:scale-150 group-hover:opacity-40"></div>
        
        <div class="relative z-10">
            <div class="flex items-center gap-4 mb-8">
                <div class="w-10 h-10 bg-primary rounded-xl flex items-center justify-center text-white shadow-lg shadow-primary/30">
                    <i class="fas fa-calendar-star text-sm"></i>
                </div>
                <span class="text-[11px] font-black text-slate-300 uppercase tracking-[3px]">Sua Pr√≥xima Sess√£o</span>
            </div>

            {% if proxima %}
                <div class="flex items-baseline gap-2 mb-2">
                    <h3 class="text-6xl font-black text-white tracking-tighter italic">
                        {{ proxima.aula.data_hora_inicio|date:"H:i" }}
                    </h3>
                    <span class="text-primary font-black text-xl">h</span>
                </div>
                <p class="text-xl font-bold text-slate-400 mb-8 uppercase tracking-tight">
                    {{ proxima.aula.data_hora_inicio|date:"l, d \d\e F" }}
                </p>
                
                <div class="flex items-center justify-between pt-8 border-t border-white/10">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-2xl bg-white/10 border border-white/10 flex items-center justify-center text-sm font-black text-white uppercase tracking-tighter shadow-inner">
                            {{ proxima.aula.profissional.nome|slice:":2"|upper }}
                        </div>
                        <div class="flex flex-col">
                            <span class="text-[10px] font-black text-primary uppercase tracking-widest">Instrutor(a)</span>
                            <span class="text-sm font-bold text-white uppercase tracking-tight">{{ proxima.aula.profissional.nome }}</span>
                        </div>
                    </div>
                    <!-- Bot√£o de Check-in em VERDE VIBRANTE -->
                    <button class="btn btn-sm bg-emerald-500 hover:bg-emerald-600 border-none text-white rounded-xl px-6 h-12 font-black uppercase text-[10px] tracking-widest shadow-xl shadow-emerald-200 active:scale-95 transition-all">
                        CHECK-IN
                    </button>
                </div>
            {% else %}
                <div class="py-6">
                    <p class="text-slate-400 font-bold uppercase tracking-widest text-xs italic">Voc√™ n√£o tem aulas agendadas.</p>
                    <a href="{% url 'aluno_agenda' %}" class="btn bg-secondary border-none text-white font-black uppercase text-[10px] tracking-widest rounded-2xl mt-6 px-10 shadow-xl shadow-secondary/30 h-14 flex items-center justify-center gap-3">
                        AGENDAR AGORA <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            {% endif %}
        </div>
    </section>

    <!-- 3. MINI ESTAT√çSTICA (Frequ√™ncia em AZUL VIBRANTE) -->
    <div class="bg-white rounded-[2.5rem] p-8 mb-12 flex items-center justify-between border-2 border-slate-100 shadow-xl shadow-slate-200/50 relative overflow-hidden group">
        <div class="flex items-center gap-6 relative z-10">
            <div class="radial-progress text-secondary font-black" style="--value:85; --size:4.5rem; --thickness: 8px;" role="progressbar">
                <span class="text-xs font-black text-slate-900">85%</span>
            </div>
            <div>
                <h4 class="text-sm font-black text-slate-900 uppercase tracking-[2px]">Performance</h4>
                <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1">Sua assiduidade est√° incr√≠vel!</p>
            </div>
        </div>
        <div class="w-12 h-12 bg-accent/20 rounded-full flex items-center justify-center text-accent animate-pulse relative z-10">
            <i class="fas fa-trophy text-xl"></i>
        </div>
    </div>

    <!-- 4. ATALHOS R√ÅPIDOS (CORES VIBRANTES STUDIO) -->
    <div class="flex items-center gap-4 mb-8 px-4">
        <h5 class="text-[11px] font-black text-slate-400 uppercase tracking-[4px]">Servi√ßos MayaCorp</h5>
        <div class="h-[1px] flex-1 bg-slate-200"></div>
    </div>

    <div class="grid grid-cols-2 gap-6 px-2">
        
        <!-- Marcar Aula (AZUL) -->
        <a href="{% url 'aluno_agenda' %}" class="group bg-white p-8 rounded-[2.5rem] shadow-xl shadow-slate-200/40 border border-slate-100 flex flex-col items-center text-center gap-5 transition-all hover:-translate-y-2 active:scale-95">
            <div class="w-16 h-16 bg-secondary/10 rounded-2xl flex items-center justify-center text-secondary group-hover:bg-secondary group-hover:text-white transition-all duration-500 shadow-inner">
                <i class="fas fa-calendar-plus text-2xl"></i>
            </div>
            <span class="text-[11px] font-black text-slate-800 uppercase tracking-widest leading-none">Agendar<br>Aula</span>
        </a>

        <!-- Meus Contratos (MARSALA) -->
        <a href="#" class="group bg-white p-8 rounded-[2.5rem] shadow-xl shadow-slate-200/40 border border-slate-100 flex flex-col items-center text-center gap-5 transition-all hover:-translate-y-2 active:scale-95">
            <div class="w-16 h-16 bg-primary/10 rounded-2xl flex items-center justify-center text-primary group-hover:bg-primary group-hover:text-white transition-all duration-500 shadow-inner">
                <i class="fas fa-file-signature text-2xl"></i>
            </div>
            <span class="text-[11px] font-black text-slate-800 uppercase tracking-widest leading-none">Planos &<br>Contratos</span>
        </a>

        <!-- Financeiro (AMARELO) -->
        <a href="{% url 'aluno_financeiro' %}" class="group bg-white p-8 rounded-[2.5rem] shadow-xl shadow-slate-200/40 border border-slate-100 flex flex-col items-center text-center gap-5 transition-all hover:-translate-y-2 active:scale-95">
            <div class="w-16 h-16 bg-accent/10 rounded-2xl flex items-center justify-center text-amber-600 group-hover:bg-accent group-hover:text-amber-950 transition-all duration-500 shadow-inner">
                <i class="fas fa-wallet text-2xl"></i>
            </div>
            <span class="text-[11px] font-black text-slate-800 uppercase tracking-widest leading-none">Faturas<br>Pagas</span>
        </a>

        <!-- Falar com Studio (ESMERALDA) -->
        <a href="https://wa.me/{{ request.tenant.whatsapp_central }}" class="group bg-white p-8 rounded-[2.5rem] shadow-xl shadow-slate-200/40 border border-slate-100 flex flex-col items-center text-center gap-5 transition-all hover:-translate-y-2 active:scale-95">
            <div class="w-16 h-16 bg-emerald-100 rounded-2xl flex items-center justify-center text-emerald-600 group-hover:bg-emerald-500 group-hover:text-white transition-all duration-500 shadow-inner">
                <i class="fab fa-whatsapp text-3xl"></i>
            </div>
            <span class="text-[11px] font-black text-slate-800 uppercase tracking-widest leading-none">Suporte<br>Studio</span>
        </a>

    </div>

</div>

<style>
    /* For√ßar a nitidez dos n√∫meros na progress√£o radial */
    .radial-progress span {
        font-variant-numeric: tabular-nums;
    }
</style>
{% endblock %}