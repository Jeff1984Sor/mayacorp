{% extends 'base.html' %}
{% load static %}

{% block title %}
{% if form.instance.pk %}
Editar Serviço | MayaCorp Fit
{% else %}
Configurar Serviço | MayaCorp Fit
{% endif %}
{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto pb-24 px-4">

<!-- ================= HEADER ================= -->
<header class="mb-16 text-center">
    <div class="w-20 h-20 bg-primary rounded-2xl flex items-center justify-center
                text-white mx-auto mb-6 shadow-xl">
        <i class="fas fa-layer-group text-3xl"></i>
    </div>

    <h1 class="text-4xl font-black text-slate-900 tracking-tight">
        {% if form.instance.pk %}Editar Serviço{% else %}Configurar Serviço{% endif %}
    </h1>

    <p class="text-[11px] text-slate-500 font-bold uppercase tracking-[3px] mt-2">
        Modalidades e tipos de aula do studio
    </p>
</header>

<!-- ================= CARD ================= -->
<div class="bg-white rounded-3xl shadow-xl border border-slate-100 p-10 md:p-14">

    <form method="POST" class="space-y-12">
        {% csrf_token %}

        <!-- ================= NOME ================= -->
        <section>
            <label class="block text-[10px] font-black text-slate-500 uppercase tracking-widest mb-3 ml-1">
                Nome da modalidade
            </label>

            <input type="text"
                   name="nome"
                   value="{{ form.nome.value|default:'' }}"
                   placeholder="Ex: Pilates Solo, Pilates Aparelhos"
                   class="w-full h-16 bg-white border-2 border-slate-200 rounded-2xl px-6
                          text-lg font-black text-slate-900
                          focus:border-primary focus:ring-0 transition"
                   required>

            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-2 ml-1">
                Exibido na agenda, contratos e relatórios
            </p>
        </section>

        <!-- ================= COR ================= -->
        <section>
            <label class="block text-[10px] font-black text-slate-500 uppercase tracking-widest mb-3 ml-1">
                Cor na agenda
            </label>

            <div class="flex items-center gap-6 bg-slate-50 p-6 rounded-2xl border border-slate-200">
                <input type="color"
                       name="cor"
                       value="{{ form.cor.value|default:'#802422' }}"
                       class="w-16 h-16 rounded-xl cursor-pointer shadow-md">

                <div>
                    <p class="text-sm font-black text-slate-800 uppercase">
                        Identificação visual
                    </p>
                    <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1">
                        Facilita a leitura da agenda
                    </p>
                </div>
            </div>
        </section>

        <!-- ================= CONFIGURAÇÕES ================= -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8">

            <!-- Tipo -->
            <div>
                <label class="block text-[10px] font-black text-slate-500 uppercase tracking-widest mb-3 ml-1">
                    Tipo de aula
                </label>

                <select name="tipo"
                        class="w-full h-14 bg-white border-2 border-slate-200 rounded-2xl px-6
                               font-black text-slate-700 focus:border-primary focus:ring-0">
                    <option value="INDIVIDUAL"
                        {% if form.tipo.value == 'INDIVIDUAL' %}selected{% endif %}>
                        Individual
                    </option>
                    <option value="GRUPO"
                        {% if form.tipo.value == 'GRUPO' %}selected{% endif %}>
                        Em grupo
                    </option>
                </select>
            </div>

            <!-- Capacidade -->
            <div>
                <label class="block text-[10px] font-black text-slate-500 uppercase tracking-widest mb-3 ml-1">
                    Capacidade padrão
                </label>

                <input type="number"
                       name="capacidade"
                       min="1"
                       value="{{ form.capacidade.value|default:1 }}"
                       class="w-full h-14 bg-white border-2 border-slate-200 rounded-2xl px-6
                              font-black text-slate-700 focus:border-primary focus:ring-0">

                <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-2 ml-1">
                    Máximo de alunos por aula
                </p>
            </div>
        </section>

        <!-- ================= STATUS ================= -->
        <section class="flex items-center justify-between bg-slate-50 p-6 rounded-2xl border border-slate-200">
            <div>
                <p class="text-xs font-black text-slate-700 uppercase tracking-widest">
                    Serviço ativo
                </p>
                <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1">
                    Disponível para agendamento
                </p>
            </div>

            <input type="checkbox"
                   name="ativo"
                   class="toggle toggle-secondary scale-110"
                   {% if form.instance.pk %}
                        {% if form.ativo.value %}checked{% endif %}
                   {% else %}
                        checked
                   {% endif %}>
        </section>

        <!-- ================= AÇÕES ================= -->
        <div class="flex flex-col md:flex-row gap-4 pt-8">
            <button type="submit"
                    class="btn bg-secondary text-white flex-1 h-16 rounded-2xl
                           shadow-xl font-black uppercase tracking-widest
                           hover:bg-blue-800 hover:scale-[1.02] transition">
                <i class="fas fa-save mr-3"></i>
                Salvar serviço
            </button>

            <a href="{% url 'servico_list' %}"
               class="btn btn-ghost h-16 px-10 text-slate-400 font-black uppercase tracking-widest text-xs rounded-2xl">
                Cancelar
            </a>
        </div>

    </form>
</div>

<!-- ================= FOOTER ================= -->
<div class="mt-14 text-center">
    <span class="inline-flex items-center gap-2 px-6 py-2 bg-white rounded-full
                 border border-slate-200 shadow-sm
                 text-[9px] font-black text-slate-400 uppercase tracking-widest">
        Configuração global do studio
    </span>
</div>

</div>

<style>
input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
input[type="color"]::-webkit-color-swatch {
    border-radius: 0.75rem;
    border: 3px solid white;
}
</style>
{% endblock %}
