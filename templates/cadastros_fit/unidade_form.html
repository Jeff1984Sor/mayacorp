{% extends 'base.html' %}
{% load static %}

{% block title %}
{% if object %}Editar Unidade{% else %}Nova Unidade{% endif %} | MayaCorp Fit
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto pb-24 px-4">

<header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-8">
    <div class="flex items-center gap-6">
        <div class="w-16 h-16 bg-primary rounded-[22px] flex items-center justify-center text-white shadow-xl shadow-primary/30 border-2 border-white">
            <i class="fas fa-building text-2xl"></i>
        </div>
        <div>
            <h1 class="text-3xl font-black text-slate-800 tracking-tighter uppercase italic">
                {% if object %}Editar Unidade{% else %}Nova Unidade{% endif %}
            </h1>
            <p class="text-[10px] text-primary font-black uppercase tracking-[3px] mt-1">
                Estrutura Física e Regras Operacionais
            </p>
        </div>
    </div>

    <a href="{% url 'unidade_list' %}"
       class="btn btn-circle btn-ghost text-slate-300 hover:text-primary transition-all">
        <i class="fas fa-times text-xl"></i>
    </a>
</header>

<form method="post" class="space-y-10">
{% csrf_token %}

<!-- ================= IDENTIDADE ================= -->
<section class="bg-white rounded-[3.5rem] shadow-2xl shadow-slate-200/60 border border-slate-100 p-12">

    <h3 class="text-sm font-black text-slate-900 uppercase tracking-[4px] mb-10">
        Identificação da Unidade
    </h3>

    <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-4">
        Nome da Unidade *
    </label>
    <input type="text"
           name="nome"
           value="{{ form.nome.value|default:object.nome|default:'' }}"
           class="input-mayacorp text-xl"
           placeholder="EX: STUDIO PILATES CENTRO"
           required>
</section>

<!-- ================= CAPACIDADE ================= -->
<section class="bg-white rounded-[3.5rem] shadow-2xl shadow-slate-200/60 border border-slate-100 p-12">

    <h3 class="text-sm font-black text-slate-900 uppercase tracking-[4px] mb-10">
        Capacidade Operacional
    </h3>

    <div class="grid md:grid-cols-12 gap-8 items-center">
        <div class="md:col-span-4">
            <label class="text-[10px] font-black text-primary uppercase tracking-widest text-center block mb-2">
                Alunos por Aula *
            </label>
            <input type="number"
                   name="capacidade_padrao"
                   min="1"
                   value="{{ form.capacidade_padrao.value|default:object.capacidade_padrao|default:3 }}"
                   class="input-capacidade"
                   required>
        </div>

        <div class="md:col-span-8 bg-slate-50 rounded-3xl p-6 border border-slate-100">
            <p class="text-[10px] text-slate-600 font-bold uppercase tracking-widest leading-relaxed">
                Este valor define o <strong>limite máximo de alunos simultâneos</strong>.
                A agenda bloqueará automaticamente novos agendamentos ao atingir esse número.
            </p>
        </div>
    </div>
</section>

<!-- ================= ENDEREÇO ================= -->
<section class="bg-white rounded-[3.5rem] shadow-2xl shadow-slate-200/60 border border-slate-100 p-12">

    <h3 class="text-sm font-black text-slate-900 uppercase tracking-[4px] mb-10">
        Endereço e Contato
    </h3>

    <input type="text"
           name="endereco"
           value="{{ form.endereco.value|default:object.endereco|default:'' }}"
           class="input-mayacorp"
           placeholder="Endereço completo">

    <input type="text"
           name="telefone"
           value="{{ form.telefone.value|default:object.telefone|default:'' }}"
           class="input-mayacorp mt-6"
           placeholder="Telefone da unidade">
</section>

<!-- ================= STATUS ================= -->
<section class="bg-slate-50 rounded-[2.5rem] p-8 border border-slate-200 flex items-center justify-between">
    <div>
        <p class="text-xs font-black uppercase tracking-widest text-slate-700">
            Unidade Ativa
        </p>
        <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">
            Unidades inativas não aceitam agendamentos
        </p>
    </div>
    <input type="checkbox"
           name="ativo"
           class="toggle toggle-primary scale-125"
           {% if form.ativo.value|default:object.ativo|default:True %}checked{% endif %}>
</section>

<!-- ================= AÇÃO ================= -->
<div class="flex justify-center pt-6">
    <button type="submit"
            class="btn bg-primary hover:bg-red-900 border-none text-white rounded-[2.2rem]
                   px-24 h-20 shadow-2xl shadow-primary/30
                   font-black uppercase tracking-[3px] italic
                   transition-all hover:scale-105">
        Salvar Unidade
    </button>
</div>

</form>
</div>

<style>
.input-mayacorp{
    @apply input input-bordered rounded-2xl bg-slate-50 border-none font-bold text-slate-700 h-14 w-full
           focus:ring-2 focus:ring-primary/20 transition-all;
}
.input-capacidade{
    @apply input rounded-2xl bg-primary/5 border-2 border-primary/20
           font-black text-primary text-3xl h-16 w-full text-center
           focus:border-primary focus:ring-0;
}
</style>
{% endblock %}
