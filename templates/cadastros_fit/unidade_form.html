{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}{% if form.instance.pk %}Editar Unidade{% else %}Nova Unidade{% endif %} - MayaCorp{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto pb-20">
    
    <!-- HEADER -->
    <header class="flex justify-between items-center mb-10 px-2">
        <div class="flex items-center gap-4">
            <div class="w-14 h-14 bg-serene-blue/20 rounded-[22px] flex items-center justify-center text-serene-blue shadow-sm">
                <i class="fas fa-building text-2xl"></i>
            </div>
            <div>
                <h1 class="text-3xl font-black text-slate-800 tracking-tight">
                    {% if form.instance.pk %}Editar Unidade{% else %}Nova Unidade{% endif %}
                </h1>
                <p class="text-[10px] text-slate-400 font-black uppercase tracking-[2px] mt-1">
                    Gestão de Filiais e Espaços Físicos
                </p>
            </div>
        </div>
    </header>

    <!-- CARD PRINCIPAL (Soft UI Style) -->
    <div class="bg-white rounded-[40px] shadow-2xl shadow-slate-200/50 border border-white overflow-hidden">
        
        <form method="post" class="p-8 md:p-12 space-y-8">
            {% csrf_token %}

            <!-- Destaque Visual (Opcional - Estilo Wellness) -->
            <div class="bg-slate-50 p-6 rounded-[28px] border border-slate-100 flex items-center gap-4 mb-8">
                <div class="w-12 h-12 bg-white rounded-2xl flex items-center justify-center text-serene-blue shadow-sm">
                    <i class="fas fa-map-marker-alt"></i>
                </div>
                <p class="text-xs text-slate-500 font-medium leading-relaxed">
                    Certifique-se de que o endereço está correto para que os alunos encontrem a unidade facilmente.
                </p>
            </div>

            <!-- FORMULÁRIO RENDERIZADO (Customizado via CSS abaixo) -->
            <div class="space-y-4">
                {{ form|crispy }}
            </div>

            <!-- BOTÕES DE AÇÃO -->
            <div class="flex flex-col gap-3 pt-6">
                <button type="submit" class="btn bg-serene-blue border-none text-white rounded-2xl h-16 shadow-xl shadow-blue-200 normal-case font-black text-lg italic hover:bg-blue-400 hover:scale-[1.01] transition-all">
                    Salvar Unidade
                </button>
                <a href="{% url 'unidade_list' %}" class="btn btn-ghost rounded-2xl text-slate-400 font-bold normal-case">
                    Cancelar e Voltar
                </a>
            </div>
        </form>
    </div>

    <!-- RODAPÉ DE AJUDA -->
    <div class="mt-8 text-center">
        <p class="text-[10px] text-slate-300 font-bold uppercase tracking-[3px]">MayaCorp Infrastructure Module</p>
    </div>
</div>

<style>
    /* Estilização para o Crispy Forms se adaptar ao Soft UI do MayaCorp */
    
    /* Labels Minimalistas */
    .form-control label, .mb-3 label { 
        @apply text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block ml-1 !important; 
    }
    
    /* Inputs Soft */
    .input, .textinput, .textarea, .select { 
        @apply w-full bg-slate-50 border-slate-100 rounded-2xl px-5 h-14 focus:ring-2 focus:ring-serene-blue/20 focus:border-serene-blue/30 focus:outline-none transition-all text-slate-600 font-medium !important; 
    }

    /* Textarea com respiro */
    .textarea { @apply h-32 py-4 !important; }

    /* Checkboxes/Radios (DaisyUI) */
    .checkbox { @apply checkbox-primary rounded-lg !important; }
</style>

<script>
    // Foca no primeiro campo ao carregar
    document.addEventListener('DOMContentLoaded', function() {
        const firstInput = document.querySelector('input:not([type=hidden])');
        if (firstInput) firstInput.focus();
    });
</script>
{% endblock %}