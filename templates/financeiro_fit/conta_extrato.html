{% extends 'base.html' %}
{% block content %}
<div class="max-w-7xl mx-auto pb-24 px-4">
    
    <!-- HEADER: Identidade Studio Premium -->
    <header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-8 px-2">
        <div class="flex items-center gap-6">
            <!-- Ícone em MARSALA (Autoridade Financeira) -->
            <div class="w-16 h-16 bg-primary rounded-[22px] flex items-center justify-center text-white shadow-xl shadow-primary/30 border-2 border-white">
                <i class="fas fa-university text-2xl"></i>
            </div>
            <div>
                <h1 class="text-4xl font-black text-slate-900 tracking-tighter uppercase">{{ conta.nome }}</h1>
                <div class="flex items-center gap-2 mt-1">
                    <span class="text-[11px] font-black text-primary uppercase tracking-[2px]">Saldo Consolidado:</span>
                    <span class="text-lg font-black text-slate-900 tracking-tighter">R$ {{ conta.saldo_atual }}</span>
                </div>
            </div>
        </div>

        <!-- BOTÕES DE EXPORTAÇÃO (VIBRANTES) -->
        <div class="flex gap-4">
            <a href="{% url 'exportar_extrato_excel' conta.pk %}?{{ request.GET.urlencode }}" class="btn bg-emerald-500 hover:bg-emerald-600 border-none text-white rounded-2xl h-14 px-8 font-black uppercase tracking-widest text-[10px] shadow-lg shadow-emerald-200 transition-all hover:scale-105">
                <i class="fas fa-file-excel mr-2 text-sm"></i> EXCEL
            </a>
            <a href="{% url 'exportar_extrato_pdf' conta.pk %}?{{ request.GET.urlencode }}" class="btn bg-primary hover:bg-red-900 border-none text-white rounded-2xl h-14 px-8 font-black uppercase tracking-widest text-[10px] shadow-lg shadow-primary/20 transition-all hover:scale-105">
                <i class="fas fa-file-pdf mr-2 text-sm"></i> PDF
            </a>
        </div>
    </header>

    <!-- BARRA DE FILTROS (Visual Studio MayaCorp) -->
    <section class="bg-white p-8 md:p-10 rounded-[3rem] shadow-2xl shadow-slate-200/60 border border-slate-100 mb-10 relative overflow-hidden">
        <!-- Detalhe decorativo lateral em Azul -->
        <div class="absolute left-0 top-0 w-2 h-full bg-secondary"></div>
        
        <form method="GET" class="grid grid-cols-1 md:grid-cols-4 gap-8 items-end">
            <div class="flex flex-col gap-3">
                <label class="text-[11px] font-black text-slate-500 uppercase tracking-[2px] ml-2">Período Inicial</label>
                <input type="date" name="data_inicio" value="{{ filtros.data_inicio }}" class="w-full h-14 bg-slate-50 border-2 border-slate-200 rounded-2xl px-6 text-sm font-black text-slate-900 focus:border-primary transition-all">
            </div>
            <div class="flex flex-col gap-3">
                <label class="text-[11px] font-black text-slate-500 uppercase tracking-[2px] ml-2">Período Final</label>
                <input type="date" name="data_fim" value="{{ filtros.data_fim }}" class="w-full h-14 bg-slate-50 border-2 border-slate-200 rounded-2xl px-6 text-sm font-black text-slate-900 focus:border-primary transition-all">
            </div>
            
            <button type="submit" class="btn bg-secondary hover:bg-blue-800 border-none text-white h-14 rounded-2xl font-black uppercase tracking-widest text-[10px] shadow-xl shadow-secondary/30 transition-all hover:scale-105">
                <i class="fas fa-filter mr-2"></i> FILTRAR EXTRATO
            </button>
            
            <a href="{% url 'conta_extrato' conta.pk %}" class="btn btn-ghost text-slate-400 font-black uppercase tracking-widest text-[10px] h-14 rounded-2xl hover:bg-slate-100">
                LIMPAR BUSCA
            </a>
        </form>
    </section>

    <!-- TABELA DE MOVIMENTAÇÕES (Máxima Nitidez e Contraste) -->
    <div class="bg-white rounded-[3.5rem] shadow-2xl shadow-slate-200/60 border border-slate-100 overflow-hidden relative">
        <table class="table w-full border-collapse">
            <thead>
                <tr class="bg-slate-900 border-none">
                    <th class="text-white text-[11px] font-black uppercase tracking-[2px] py-8 pl-12 text-left">Data do Lançamento</th>
                    <th class="text-white text-[11px] font-black uppercase tracking-[2px] py-8 text-left">Descrição da Atividade</th>
                    <th class="text-white text-[11px] font-black uppercase tracking-[2px] py-8 text-center">Valor Movimentado</th>
                    <th class="text-white text-[11px] font-black uppercase tracking-[2px] py-8 pr-12 text-center">Situação</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-slate-100">
                {% for l in lancamentos %}
                <tr class="hover:bg-primary/5 transition-colors group">
                    <!-- DATA (NÍTIDA) -->
                    <td class="py-7 pl-12">
                        <span class="text-slate-900 font-black text-base">{{ l.data_vencimento|date:"d/m/Y" }}</span>
                        <p class="text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1">{{ l.data_vencimento|date:"l" }}</p>
                    </td>

                    <!-- DESCRIÇÃO -->
                    <td class="py-7">
                        <span class="text-sm font-black text-slate-800 uppercase tracking-tight group-hover:text-primary transition-colors">{{ l.descricao }}</span><br>
                        <div class="flex items-center gap-2 mt-1">
                            <span class="text-[10px] font-black text-slate-400 uppercase tracking-widest">{{ l.categoria.nome }}</span>
                        </div>
                    </td>

                    <!-- VALOR (VIBRANTE E NÍTIDO) -->
                    <td class="py-7 text-center">
                        <div class="text-xl font-black tracking-tighter {% if l.categoria.tipo == 'RECEITA' %}text-emerald-600{% else %}text-primary{% endif %}">
                            {% if l.categoria.tipo == 'RECEITA' %}+{% else %}-{% endif %} R$ {{ l.valor }}
                        </div>
                    </td>

                    <!-- STATUS (BADGES VIBRANTES) -->
                    <td class="py-7 pr-12 text-center">
                        {% if l.status == 'PAGO' %}
                            <div class="badge bg-emerald-500 border-none text-white text-[10px] font-black py-4 px-6 rounded-xl shadow-lg shadow-emerald-200 uppercase tracking-widest">PAGO</div>
                        {% else %}
                            <div class="badge bg-accent border-none text-accent-content text-[10px] font-black py-4 px-6 rounded-xl shadow-lg shadow-accent/20 uppercase tracking-widest">PENDENTE</div>
                        {% endif %}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4" class="py-32 text-center">
                        <div class="flex flex-col items-center">
                            <div class="w-24 h-24 bg-slate-50 rounded-full flex items-center justify-center text-slate-200 mb-6 border-2 border-dashed border-slate-200">
                                <i class="fas fa-receipt text-4xl"></i>
                            </div>
                            <h3 class="text-slate-900 text-xl font-black tracking-tight uppercase">Nenhuma movimentação</h3>
                            <p class="text-slate-400 mt-2 font-bold uppercase tracking-widest text-[11px]">Não encontramos registros para o período selecionado.</p>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- RODAPÉ TÉCNICO -->
    <div class="mt-16 text-center">
        <div class="inline-flex items-center gap-3 px-8 py-3 bg-white rounded-full border border-slate-200 shadow-xl">
            <div class="w-2.5 h-2.5 bg-accent rounded-full animate-pulse shadow-[0_0_8px_rgba(250,204,21,0.6)]"></div>
            <span class="text-[10px] font-black text-slate-500 uppercase tracking-[2px]">Extrato Auditado MayaCorp Fit v4.2</span>
        </div>
    </div>
</div>
{% endblock %}