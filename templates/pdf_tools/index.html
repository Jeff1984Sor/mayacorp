{% extends 'base.html' %}
{% load static %}

{% block title %}Conciliador Inteligente | MayaCorp Fit{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto pb-24 px-4">
    
    <!-- HEADER: Identidade Visual de IA Premium -->
    <header class="flex flex-col md:flex-row justify-between items-center mb-12 gap-8 px-2 animate-in fade-in duration-700">
        <div class="flex items-center gap-6">
            <!-- Ícone em MARSALA (Tecnologia Mestre) -->
            <div class="w-16 h-16 bg-primary rounded-[22px] flex items-center justify-center text-white shadow-xl shadow-primary/30 border-2 border-white transition-transform hover:rotate-6">
                <i class="fas fa-brain text-2xl"></i>
            </div>
            <div>
                <h1 class="text-4xl font-black text-slate-900 tracking-tighter uppercase">Conciliador IA</h1>
                <p class="text-[11px] text-primary font-black uppercase tracking-[3px] mt-1">
                    Processamento <span class="text-slate-900">Automatizado de Lotes</span>
                </p>
            </div>
        </div>
        
        <!-- Badge IA em AMARELO (Atenção/Inteligência) -->
        <div class="badge bg-accent text-accent-content border-none font-black py-5 px-8 rounded-xl shadow-lg shadow-accent/20 animate-pulse uppercase tracking-widest text-[10px]">
            <i class="fas fa-bolt mr-2 text-sm"></i> MOTOR IA ATIVO
        </div>
    </header>

    <form method="post" enctype="multipart/form-data" class="space-y-10">
        {% csrf_token %}

        <!-- CARD 1: BOLETOS (MARSALA FOCUS) -->
        <section class="bg-white rounded-[3rem] shadow-2xl shadow-slate-200/60 border border-slate-100 overflow-hidden relative group transition-all hover:border-primary/20">
            <!-- Detalhe decorativo lateral -->
            <div class="absolute left-0 top-0 w-2 h-full bg-primary"></div>

            <div class="p-8 md:p-12 border-b border-slate-50 flex items-center gap-5 bg-slate-50/50">
                <div class="w-12 h-12 bg-primary rounded-2xl flex items-center justify-center text-white shadow-lg shadow-primary/20 group-hover:scale-110 transition-transform">
                    <i class="fas fa-file-invoice-dollar text-xl"></i>
                </div>
                <div>
                    <h3 class="text-xs font-black text-slate-900 uppercase tracking-[3px]">1. Base de Boletos</h3>
                    <p class="text-[10px] text-slate-400 font-bold uppercase mt-1">Arquivos mestres para conferência</p>
                </div>
            </div>
            
            <div class="p-8 md:p-14">
                <div class="form-control w-full">
                    <label class="label-custom">Selecionar PDFs dos Boletos (Múltiplos)</label>
                    <input type="file" name="boletos" multiple accept=".pdf" required 
                           class="file-input-premium border-primary/10" />
                    <div class="mt-6 flex items-center gap-3 px-4 py-3 bg-red-50 rounded-xl border border-primary/10">
                        <i class="fas fa-circle-info text-primary text-xs"></i>
                        <p class="text-[10px] text-primary font-black uppercase tracking-widest">Capacidade Máxima: 100 documentos por lote</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- CARD 2: COMPROVANTES (AZUL VIBRANTE FOCUS) -->
        <section class="bg-white rounded-[3rem] shadow-2xl shadow-slate-200/60 border border-slate-100 overflow-hidden relative group transition-all hover:border-secondary/20">
            <!-- Detalhe decorativo lateral -->
            <div class="absolute left-0 top-0 w-2 h-full bg-secondary"></div>

            <div class="p-8 md:p-12 border-b border-slate-50 flex items-center gap-5 bg-slate-50/50">
                <div class="w-12 h-12 bg-secondary rounded-2xl flex items-center justify-center text-white shadow-lg shadow-secondary/20 group-hover:scale-110 transition-transform">
                    <i class="fas fa-receipt text-xl"></i>
                </div>
                <div>
                    <h3 class="text-xs font-black text-slate-900 uppercase tracking-[3px]">2. Lote de Comprovantes</h3>
                    <p class="text-[10px] text-slate-400 font-bold uppercase mt-1">PDF Único com todos os pagamentos</p>
                </div>
            </div>
            
            <div class="p-8 md:p-14">
                <div class="form-control w-full">
                    <label class="label-custom">Selecionar Arquivo de Comprovantes</label>
                    <input type="file" name="comprovantes" accept=".pdf" required 
                           class="file-input-premium border-secondary/10" />
                    <div class="mt-6 flex items-center gap-3 px-4 py-3 bg-blue-50 rounded-xl border border-secondary/10">
                        <i class="fas fa-wand-magic-sparkles text-secondary text-xs"></i>
                        <p class="text-[10px] text-secondary font-black uppercase tracking-widest">A IA fará a leitura óptica (OCR) de cada página</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- AVISO E BOTÃO DE AÇÃO (MÁXIMA ENERGIA) -->
        <div class="pt-8 space-y-10">
            
            <!-- Alerta em AMARELO (Inteligência) -->
            <div class="bg-accent/10 rounded-[2.5rem] p-8 border-2 border-dashed border-accent/30 flex items-start gap-6 shadow-sm transition-all hover:bg-accent/20">
                <div class="w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-accent shadow-lg shrink-0">
                    <i class="fas fa-microchip text-2xl"></i>
                </div>
                <div>
                    <h4 class="text-sm font-black text-amber-900 uppercase tracking-widest mb-2">Protocolo de Análise MayaCorp</h4>
                    <p class="text-xs text-amber-800 font-bold leading-relaxed">
                        Nossa IA cruzará dados bancários, valores líquidos e datas de liquidação. 
                        Ao finalizar, um <span class="text-primary font-black">arquivo .ZIP organizado</span> será gerado para download imediato.
                    </p>
                </div>
            </div>

            <!-- Botão Gigante em AZUL VIBRANTE -->
            <div class="flex flex-col items-center gap-6">
                <button type="submit" class="btn w-full h-24 bg-secondary hover:bg-blue-800 border-none text-white rounded-[2.5rem] shadow-2xl shadow-secondary/40 font-black text-xl uppercase tracking-widest transition-all hover:scale-[1.02] active:scale-95 group">
                    <i class="fas fa-bolt-lightning mr-4 text-2xl text-accent group-hover:animate-pulse"></i> 
                    INICIAR CONCILIAÇÃO IA
                </button>
                
                <div class="flex items-center gap-4">
                    <div class="h-[1px] w-8 bg-slate-200"></div>
                    <p class="text-[10px] text-slate-400 font-black uppercase tracking-[5px]">
                        Automation Engine v4.2
                    </p>
                    <div class="h-[1px] w-8 bg-slate-200"></div>
                </div>
            </div>
        </div>
    </form>
</div>

<style>
    /* Labels Estilo Software Luxo */
    .label-custom { @apply text-[11px] font-black text-slate-500 uppercase tracking-[2px] mb-4 block ml-2 !important; }

    /* File Input Customizado para Nitidez Máxima */
    .file-input-premium {
        @apply w-full bg-slate-50 border-2 rounded-[1.5rem] h-20 px-4 flex items-center transition-all cursor-pointer focus:outline-none !important;
    }
    
    .file-input-premium::-webkit-file-upload-button {
        @apply bg-slate-900 border-none text-white font-black uppercase text-[10px] tracking-widest px-10 h-12 rounded-xl mr-6 hover:bg-black transition-all cursor-pointer shadow-lg !important;
        margin-top: 14px;
    }
</style>

<script>
    // Feedback visual de alta tecnologia ao processar
    document.querySelector('form').addEventListener('submit', function() {
        const btn = this.querySelector('button[type="submit"]');
        btn.innerHTML = `
            <div class="flex flex-col items-center">
                <span class="loading loading-spinner loading-lg mb-1 text-accent"></span>
                <span class="text-xs tracking-[4px]">ANALISANDO DOCUMENTOS...</span>
            </div>
        `;
        btn.classList.add('opacity-90', 'cursor-not-allowed');
        btn.classList.remove('hover:scale-[1.02]');
    });
</script>
{% endblock %}